<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app = "flights">
<head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular.min.js"></script>
    <script src="/js/app.js" charset="utf-8"></script>
    <title></title>
</head>
<body ng-controller = "flightsController as ctrl">
    <h1>Create Your Dream Trip</h1>
    <form ng-submit = "ctrl.createTrip">
        <input type="text" ng-model = "ctrl.currency" placeholder="Currency"><br/>
        <input type="text" ng-model = "ctrl.locale" placeholder="Locale"><br/>
        <input type="text" ng-model = "ctrl.originPlace" placeholder="Origin"><br/>
        <input type="text" ng-model = "ctrl.destinationPlace" placeholder="Destination"><br/>
        <input type="text" ng-model = "ctrl.outboundPartialDate" placeholder="Departure Date"><br/>
        <input type="text" ng-model = "ctrl.inboundPartialDate" placeholder="Return Date"><br/>
        <input type="submit" value="Save Trip">
    </form>

    <div ng-repeat = "trip in ctrl.trips">
        Currency: {{trip.currency}}
        Locale: {{trip.locale}}
        Origin: {{trip.originPlace}}
        Destination: {{trip.destinationPlace}}
        Departure Date: {{trip.outboundPartialDate}}
        Return Date: {{trip.inboundPartialDate}}
        <button ng-click = "ctrl.deleteTrip(trip)">Delete Trip</button>
        <a ng-if = "$index !== ctrl.indexOfFormToShow" ng-click = "ctrl.indexOfFormToShow = $index;ctrl.updatedCurrency = '';ctrl.updatedLocale = '';ctrl.updatedOriginPlace = '';ctrl.updatedDestinationPlace = '';ctrl.updatedOutboundPartialDate = '';ctrl.updatedInboundPartialDate = ''">
        </a>

        <form ng-if = "$index === ctrl.indexOfFormToShow" ng-submit = "ctrl.editTrip(trip)">
            <input type="text" ng-model = "ctrl.updatedCurrency" placeholder = "Updated Currency"><br/>
            <input type="text" ng-model = "ctrl.updatedLocale" placeholder = "Updated Locale"><br/>
            <input type="text" ng-model = "ctrl.updatedOriginPlace" placeholder = "Updated Origin"><br/>
            <input type="text" ng-model = "ctrl.updatedDestinationPlace" placeholder = "Updated Destination"><br/>
            <input type="text" ng-model = "ctrl.updatedOutboundPartialDate" placeholder = "Updated Departure"><br/>
            <input type="text" ng-model = "ctrl.updatedInboundPartialDate" placeholder = "Updated Currency"><br/>
            <input type="submit" value="Submit Edits">
            <button ng-click = "ctrl.indexOfFormToShow = null">Cancel</button>
        </form>
    </div>
</body>
</html>
